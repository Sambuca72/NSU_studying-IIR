SELECT P.RECIPE_ID, M.COMPANY, group_concat(DISTINCT MAT.WARE), group_concat(DISTINCT P.WARE), PRICE.PR
	FROM PRODUCT P, MANUFACTURER M
LEFT JOIN MATERIAL MAT ON MAT.RECIPE_ID = M.RECIPE_ID
	JOIN (SELECT AMOUNT * PRICE AS PR, RECIPE_ID FROM PRODUCT) PRICE ON M.RECIPE_ID = PRICE.RECIPE_ID
WHERE M.RECIPE_ID = P.RECIPE_ID
GROUP BY P.RECIPE_ID
ORDER BY COMPANY